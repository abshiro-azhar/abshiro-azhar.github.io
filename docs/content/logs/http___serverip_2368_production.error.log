{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":500,"domain":"http://serverip:2368","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.3:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.3:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.36.3/core/boot.js:60:5)\n    at async bootGhost (/var/lib/ghost/versions/4.36.3/core/boot.js:394:9)\n\nError: connect ECONNREFUSED 172.18.0.3:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)\n    --------------------\n    at Protocol._enqueue (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/Connection.js:116:18)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 172.18.0.3:3306","time":"2023-06-24T18:35:25.009Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":500,"domain":"http://serverip:2368","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.3:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.3:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.36.3/core/boot.js:60:5)\n    at async bootGhost (/var/lib/ghost/versions/4.36.3/core/boot.js:394:9)\n\nError: connect ECONNREFUSED 172.18.0.3:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)\n    --------------------\n    at Protocol._enqueue (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/Connection.js:116:18)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 172.18.0.3:3306","time":"2023-06-24T18:35:26.150Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":500,"domain":"http://serverip:2368","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.3:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.3:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.36.3/core/boot.js:60:5)\n    at async bootGhost (/var/lib/ghost/versions/4.36.3/core/boot.js:394:9)\n\nError: connect ECONNREFUSED 172.18.0.3:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)\n    --------------------\n    at Protocol._enqueue (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/Connection.js:116:18)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 172.18.0.3:3306","time":"2023-06-24T18:35:27.359Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":500,"domain":"http://serverip:2368","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.3:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.3:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.36.3/core/boot.js:60:5)\n    at async bootGhost (/var/lib/ghost/versions/4.36.3/core/boot.js:394:9)\n\nError: connect ECONNREFUSED 172.18.0.3:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)\n    --------------------\n    at Protocol._enqueue (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/Connection.js:116:18)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 172.18.0.3:3306","time":"2023-06-24T18:35:28.675Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":500,"domain":"http://serverip:2368","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.3:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.3:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.36.3/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.36.3/core/boot.js:60:5)\n    at async bootGhost (/var/lib/ghost/versions/4.36.3/core/boot.js:394:9)\n\nError: connect ECONNREFUSED 172.18.0.3:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)\n    --------------------\n    at Protocol._enqueue (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/var/lib/ghost/versions/4.36.3/node_modules/mysql/lib/Connection.js:116:18)\n    at /var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/var/lib/ghost/versions/4.36.3/node_modules/knex-migrator/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 172.18.0.3:3306","time":"2023-06-24T18:35:30.362Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"err":{"id":"f285a3d0-1414-11ee-81f0-4bf927176c37","domain":"http://serverip:2368","code":"IMAGE_SIZE_URL","name":"InternalServerError","statusCode":500,"level":"critical","message":"URL empty or invalid.","context":"\"http://serverip:2368/favicon.ico\"","stack":"InternalServerError: URL empty or invalid.\n    at /var/lib/ghost/versions/4.36.3/core/server/lib/image/image-size.js:159:35\n    at tryCatcher (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/util.js:16:23)\n    at /var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/catch_filter.js:34:37\n    at tryCatcher (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/util.js:16:23)\n    at Promise._settlePromiseFromHandler (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/promise.js:547:31)\n    at Promise._settlePromise (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/promise.js:604:18)\n    at Promise._settlePromise0 (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/promise.js:649:10)\n    at Promise._settlePromises (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/promise.js:725:18)\n    at _drainQueueStep (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/async.js:93:12)\n    at _drainQueue (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/async.js:86:9)\n    at Async._drainQueues (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/async.js:102:5)\n    at Immediate.Async.drainQueues [as _onImmediate] (/var/lib/ghost/versions/4.36.3/node_modules/bluebird/js/release/async.js:15:14)\n    at processImmediate (internal/timers.js:464:21)"},"msg":"URL empty or invalid.","time":"2023-06-26T11:31:09.584Z","v":0}
{"name":"Log","hostname":"f5cd74c49ca4","pid":1,"level":50,"req":{"meta":{"requestId":"3a1fc4e3-7594-47a0-9ffc-d356032f2654","userId":null},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/canary/admin/users/me/?include=roles","params":{},"headers":{"host":"localhost:2368","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/114.0","accept":"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.5","accept-encoding":"gzip, deflate, br","content-type":"application/json; charset=UTF-8","x-ghost-version":"4.36","app-pragma":"no-cache","x-requested-with":"XMLHttpRequest","connection":"keep-alive","referer":"http://localhost:2368/ghost/","cookie":"**REDACTED**","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"321","etag":"W/\"141-8WxYaH1WAUT3jPS2UHElAvPHhfg\"","vary":"Accept-Encoding"},"statusCode":403,"responseTime":"412ms"},"err":{"id":"2f9819b0-1415-11ee-81f0-4bf927176c37","domain":"http://serverip:2368","code":null,"name":"NoPermissionError","statusCode":403,"level":"normal","message":"Authorization failed","context":"\"Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.\"","stack":"NoPermissionError: Authorization failed"},"msg":"Authorization failed","time":"2023-06-26T11:32:52.047Z","v":0}
